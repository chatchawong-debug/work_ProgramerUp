<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>การคำนวณรายจ่ายต่อเดือน</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 50px;
            text-align: center;
            background-color: #f0f2f5;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
        }
        #messageArea {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #dcdcdc;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            font-size: 1.2em;
            color: #555;
            display: inline-block; /* ทำให้ div มีขนาดตามเนื้อหา */
        }
        .success {
            color: #28a745; /* สีเขียว */
            font-weight: bold;
        }
        .error {
            color: #dc3545; /* สีแดง */
            font-weight: bold;
        }
    </style>
</head>
<body>
    <center><h1>>> การคำนวณรายจ่ายต่อเดือน <<</h1></center>
    <div id="messageArea">
        </div>

    <script>
        // ฟังก์ชันแสดงข้อความบนเว็บ
        function displayMessage(message, type) {
            const messageArea = document.getElementById('messageArea');
            messageArea.innerText = message;
            messageArea.className = ''; // ล้าง class เดิม
            if (type) {
                messageArea.classList.add(type); // เพิ่ม class ตามประเภท
            }
        }

        // รับข้อมูลผ่าน prompt
        let salaryInput = prompt('กรุณาระบุเงินเดือน :) ');
        let savingsInput = prompt('จำนวนเงินที่จะเก็บ :');

        // แปลงค่าเป็นตัวเลข (parseInt)
        let salary = parseInt(salaryInput);
        let savings = parseInt(savingsInput);

        // ตรวจสอบความถูกต้องของข้อมูลเงินเดือนและเงินออม
        if (isNaN(salary) || isNaN(savings) || salary < 0 || savings < 0) {
            console.error("!ข้อผิดพลาด! กรุณากรอกข้อมูลเงินเดือนและเงินออมที่เป็นตัวเลขและไม่ติดลบ :)");
            displayMessage("!ข้อผิดพลาด! กรุณากรอกข้อมูลเงินเดือนและเงินออมที่เป็นตัวเลขและไม่ติดลบ :)", "error");
        } else {
            // รับค่าใช้จ่ายเพิ่มเติมจากผู้ใช้
            let foodExpensesInput = prompt('ค่าอาหารต่อเดือน:');
            let travelExpensesInput = prompt('ค่าเดินทางต่อเดือน:');
            let rentExpensesInput = prompt('ค่าเช่า/ผ่อนบ้านต่อเดือน:');

            // แปลงค่าใช้จ่ายเป็นตัวเลข (parseInt)
            let foodExpenses = parseInt(foodExpensesInput);
            let travelExpenses = parseInt(travelExpensesInput);
            let rentExpenses = parseInt(rentExpensesInput);

            // ตรวจสอบความถูกต้องของข้อมูลค่าใช้จ่ายย่อย
            if (isNaN(foodExpenses) || isNaN(travelExpenses) || isNaN(rentExpenses) ||
                foodExpenses < 0 || travelExpenses < 0 || rentExpenses < 0) {
                
                console.error("!ข้อผิดพลาด! กรุณากรอกค่าใช้จ่ายย่อยเป็นตัวเลขและไม่ติดลบ :)");
                displayMessage("!ข้อผิดพลาด! กรุณากรอกค่าใช้จ่ายย่อยเป็นตัวเลขและไม่ติดลบ :)", "error");
            } else {
                // คำนวณเงินที่เหลือหลังหักเงินเก็บ
                let remainingBudget = salary - savings;
                
                // คำนวณค่าใช้จ่ายหลักทั้งหมด
                let totalFixedExpenses = foodExpenses + travelExpenses + rentExpenses;
                
                // คำนวณเงินที่เหลือจริง ๆ สำหรับค่าใช้จ่ายอื่นๆ
                let actualRemaining = remainingBudget - totalFixedExpenses;

                // คำนวณสัดส่วนเป็นเปอร์เซ็นต์
                let savingsPercentage = (savings / salary) * 100;
                let remainingPercentage = (actualRemaining / salary) * 100;

                // output of console
                let outputText = `--- ผลลัพธ์การคำนวณรายจ่ายต่อเดือน ---\n`;
                outputText += `เงินเดือนทั้งหมด: ${salary.toLocaleString()} บาท\n`;
                outputText += `จำนวนเงินที่ต้องการเก็บ: ${savings.toLocaleString()} บาท (${savingsPercentage.toFixed(2)}% ของเงินเดือน)\n`;
                outputText += `เงินที่เหลือสำหรับใช้จ่าย (ก่อนหักค่าใช้จ่ายหลัก): ${remainingBudget.toLocaleString()} บาท\n`;
                outputText += `\n--- ค่าใช้จ่ายหลัก ---\n`;
                outputText += `ค่าอาหารต่อเดือน: ${foodExpenses.toLocaleString()} บาท\n`;
                outputText += `ค่าเดินทางต่อเดือน: ${travelExpenses.toLocaleString()} บาท\n`;
                outputText += `ค่าเช่า/ผ่อนบ้านต่อเดือน: ${rentExpenses.toLocaleString()} บาท\n`;
                outputText += `-------------------------------------------\n`;
                outputText += `เงินที่เหลือสำหรับสิ่งจำเป็นอื่นๆ และค่าใช้จ่ายผันแปร: ${actualRemaining.toLocaleString()} บาท (${remainingPercentage.toFixed(2)}% ของเงินเดือน)\n`;

                // คำแนะนำ ข้อความแจ้งเตือน
                if (actualRemaining < 0) {
                    outputText += `\n*** คำเตือน: คุณมีค่าใช้จ่ายเกินงบประมาณที่กำหนดไว้! ควรทบทวนและปรับลดค่าใช้จ่าย***\n`;
                } else if (savingsPercentage < 10) {
                    outputText += `\n* คำแนะนำ: สัดส่วนเงินออมของคุณยังน้อยกว่า 10% ของเงินเดือน ลองพิจารณาเพิ่มเงินออมให้มากขึ้นเพื่ออนาคต*\n`;
                } else if (actualRemaining < (salary * 0.1)) {
                    outputText += `\n* คำแนะนำ: เงินเหลือใช้ของคุณค่อนข้างน้อยเมื่อเทียบกับเงินเดือน ลองทบทวนค่าใช้จ่ายบางส่วนเพื่อความยืดหยุ่นทางการเงินที่มากขึ้น *\n`;
                } else {
                    outputText += `\nยอดเยี่ยม! คุณบริหารจัดการการเงินได้ดี มีเงินเหลือใช้และเงินออมอยู่ในระดับที่น่าพอใจ`;
                }
                
                // แสดงผลลัพธ์ใน Console
                console.log(outputText);

                // แสดงข้อความบนหน้าเว็บเมื่อคำนวณเสร็จสิ้น
                displayMessage("การคำนวณเสร็จสิ้นแล้ว! กด F12 เพื่อเปิด Developer Tools และดูผลลัพธ์ในแท็บ Console", "success");
            }
        }
    </script>
</body>
</html>